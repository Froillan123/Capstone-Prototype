<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Appointment</title>
    <link rel="stylesheet" href="css/userdashboard.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/navbar.css">
    <link rel="stylesheet" href="css/appointment.css">
</head>
<body>
     <!-- Header with Navigation -->
     <header class="header">
        <a href="#" class="logo">
            <i class="fas fa-brain"></i>
            SerenityQ
        </a>
        
        <div class="menu-toggle" id="menuToggle">
            <span></span>
            <span></span>
            <span></span>
        </div>
        
        <nav class="navbar">
            <ul class="nav-links" id="navLinks">
                <li><a href="dashboard.html" class="nav-link"><i class="fas fa-home"></i> Dashboard</a></li>
                <li><a href="appointment.html" class="nav-link active"><i class="fas fa-calendar-alt"></i> Appointments</a></li>
                <li><a href="therapist.html" class="nav-link"><i class="fas fa-user-md"></i> Therapists</a></li>
                <li><a href="booking-history.html" class="nav-link"><i class="fas fa-history"></i> Booking History</a></li>
                <li><a href="sessions.html" class="nav-link active"><i class="fas fa-clock"></i> Sessions</a></li>
            </ul>
            
            <div class="profile">
                <span class="profile-name">Sarah</span>
                <img src="https://randomuser.me/api/portraits/women/45.jpg" class="profile-img" alt="Profile">
                <div class="dropdown-menu">
                    <a href="user-profile.html" class="dropdown-item"><i class="fas fa-user"></i> Profile</a>
                    <a href="notifications.html" class="dropdown-item"><i class="fas fa-bell"></i> Notifications</a>
                    <div class="divider"></div>
                    <a href="#" class="dropdown-item"><i class="fas fa-sign-out-alt"></i> Logout</a>
                </div>
            </div>
        </nav>
    </header>



    <!-- Main Content -->
    <div class="main-content">
        <div class="page-header">
            <h1 class="page-title">
                <i class="fas fa-calendar-alt"></i> My Appointments
            </h1>
            <button class="btn btn-primary">
                <i class="fas fa-plus"></i> New Appointment
            </button>
        </div>

        <!-- Side-by-Side Calendar and Upcoming Appointments -->
        <div class="appointment-layout">
            <!-- Calendar Section -->
            <div class="calendar-container">
                <div class="calendar-header">
                    <div class="month-nav">
                        <button class="nav-btn">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <h2 class="month-title">June 2023</h2>
                        <button class="nav-btn">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                    <button class="btn btn-sm btn-outline">
                        <i class="fas fa-calendar-day"></i> Today
                    </button>
                </div>
                <div class="calendar-grid">
                    <div class="calendar-day-header">Sun</div>
                    <div class="calendar-day-header">Mon</div>
                    <div class="calendar-day-header">Tue</div>
                    <div class="calendar-day-header">Wed</div>
                    <div class="calendar-day-header">Thu</div>
                    <div class="calendar-day-header">Fri</div>
                    <div class="calendar-day-header">Sat</div>

                    <!-- Previous Month -->
                    <div class="calendar-day other-month">
                        <span class="day-number">28</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">29</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">30</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">31</span>
                    </div>
                    <!-- Current Month -->
                    <div class="calendar-day">
                        <span class="day-number">1</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">2</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">3</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">4</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">5</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">6</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">7</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">8</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">9</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">10</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">11</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">12</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">13</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">14</span>
                    </div>
                    <div class="calendar-day current-day">
                        <span class="day-number">15</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">16</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">17</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">18</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">19</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">20</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">21</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">22</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">23</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">24</span>
                    </div>
                    <div class="calendar-day has-appointment">
                        <span class="day-number">25</span>
                        <div class="day-appointments">
                            <div class="appointment-dot"></div>
                            <div class="appointment-dot"></div>
                        </div>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">26</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">27</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">28</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">29</span>
                    </div>
                    <div class="calendar-day">
                        <span class="day-number">30</span>
                    </div>
                    <!-- Next Month -->
                    <div class="calendar-day other-month">
                        <span class="day-number">1</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">2</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">3</span>
                    </div>
                    <div class="calendar-day other-month">
                        <span class="day-number">4</span>
                    </div>
                </div>
            </div>

            <!-- Upcoming Appointments Sidebar -->
            <div class="upcoming-appointments">
                <h2 class="section-title">
                    <i class="fas fa-clock"></i> Upcoming
                </h2>
                <div class="appointment-list">
                    <!-- Appointment Item 1 -->
                    <div class="appointment-item">
                        <div class="appointment-time">
                            <span>Today, 2:00 PM</span>
                            <span class="appointment-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="appointment-therapist">
                            <img src="https://randomuser.me/api/portraits/women/65.jpg" alt="Dr. Chen" class="therapist-img-sm">
                            <div>
                                <div class="therapist-name">Dr. Mei Chen</div>
                                <div class="therapist-specialty">Clinical Psychologist</div>
                            </div>
                        </div>
                        <div class="appointment-meta">
                            <span>Video Call</span>
                            <span>45 mins</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-edit"></i> Reschedule
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Appointment Item 2 -->
                    <div class="appointment-item">
                        <div class="appointment-time">
                            <span>Jun 18, 10:30 AM</span>
                            <span class="appointment-status status-pending">Pending</span>
                        </div>
                        <div class="appointment-therapist">
                            <img src="https://randomuser.me/api/portraits/men/32.jpg" alt="Dr. Rodriguez" class="therapist-img-sm">
                            <div>
                                <div class="therapist-name">Dr. Carlos Rodriguez</div>
                                <div class="therapist-specialty">CBT Specialist</div>
                            </div>
                        </div>
                        <div class="appointment-meta">
                            <span>In-Person</span>
                            <span>60 mins</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-edit"></i> Reschedule
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>

                    <!-- Appointment Item 3 -->
                    <div class="appointment-item">
                        <div class="appointment-time">
                            <span>Jun 25, 3:15 PM</span>
                            <span class="appointment-status status-confirmed">Confirmed</span>
                        </div>
                        <div class="appointment-therapist">
                            <img src="https://randomuser.me/api/portraits/women/44.jpg" alt="Dr. Patel" class="therapist-img-sm">
                            <div>
                                <div class="therapist-name">Dr. Priya Patel</div>
                                <div class="therapist-specialty">Mindfulness Coach</div>
                            </div>
                        </div>
                        <div class="appointment-meta">
                            <span>Phone Call</span>
                            <span>30 mins</span>
                        </div>
                        <div class="appointment-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-edit"></i> Reschedule
                            </button>
                            <button class="btn btn-sm btn-danger">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Past Appointments Section -->
        <div class="past-appointments">
            <h2 class="section-title">
                <i class="fas fa-history"></i> Past Appointments
            </h2>
            <div class="appointment-cards">
                <!-- Past Appointment Card 1 -->
                <div class="appointment-card">
                    <div class="card-header">
                        <div class="card-date">Jun 6, 2023</div>
                        <div class="card-status status-completed">Completed</div>
                    </div>
                    <div class="card-body">
                        <div class="therapist-info">
                            <img src="https://randomuser.me/api/portraits/men/75.jpg" alt="Dr. Johnson" class="therapist-img">
                            <div class="therapist-details">
                                <h3>Dr. Michael Johnson</h3>
                                <p>Trauma Therapist</p>
                            </div>
                        </div>
                        <div class="appointment-details">
                            <div class="detail-row">
                                <span class="detail-label">Session Type:</span>
                                <span class="detail-value">Video Call</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Duration:</span>
                                <span class="detail-value">50 mins</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Notes:</span>
                                <span class="detail-value">
                                    <a href="#"><i class="fas fa-file-alt"></i> View</a>
                                </span>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-redo"></i> Rebook
                            </button>
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-star"></i> Rate
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Past Appointment Card 2 -->
                <div class="appointment-card">
                    <div class="card-header">
                        <div class="card-date">May 28, 2023</div>
                        <div class="card-status status-cancelled">Cancelled</div>
                    </div>
                    <div class="card-body">
                        <div class="therapist-info">
                            <img src="https://randomuser.me/api/portraits/women/33.jpg" alt="Dr. Williams" class="therapist-img">
                            <div class="therapist-details">
                                <h3>Dr. Lisa Williams</h3>
                                <p>Family Therapist</p>
                            </div>
                        </div>
                        <div class="appointment-details">
                            <div class="detail-row">
                                <span class="detail-label">Session Type:</span>
                                <span class="detail-value">In-Person</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Duration:</span>
                                <span class="detail-value">60 mins</span>
                            </div>
                            <div class="detail-row">
                                <span class="detail-label">Reason:</span>
                                <span class="detail-value">Personal conflict</span>
                            </div>
                        </div>
                        <div class="card-actions">
                            <button class="btn btn-sm btn-outline">
                                <i class="fas fa-redo"></i> Rebook
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>




     <!-- Chatbot Interface -->
     <button class="chatbot-toggle" id="chatbotToggle">
        <i class="fas fa-comment-dots"></i>
    </button>

    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header">
            <span><i class="fas fa-robot me-2"></i>SerenityQ Assistant</span>
            <button class="chatbot-close" id="chatbotClose">&times;</button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message bot-message">Hello Sarah! I'm SerenityQ, your mental health assistant. How can I help you today?</div>
            <div class="message bot-message">You have an appointment with Dr. Chen tomorrow at 10:00 AM. Would you like me to remind you?</div>
        </div>
        <div class="chatbot-input">
            <input type="text" placeholder="Type your message..." id="chatbotInput">
            <button id="chatbotSend"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>




    <!-- New Appointment Modal -->
<div class="modal" id="newAppointmentModal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div class="modal-header">
            <h2><i class="fas fa-plus"></i> New Appointment</h2>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="therapistSelect">Select Therapist</label>
                <select id="therapistSelect" class="form-control">
                    <option value="">-- Select a therapist --</option>
                    <option value="1">Dr. Mei Chen - Clinical Psychologist</option>
                    <option value="2">Dr. Carlos Rodriguez - CBT Specialist</option>
                    <option value="3">Dr. Priya Patel - Mindfulness Coach</option>
                    <option value="4">Dr. Michael Johnson - Trauma Therapist</option>
                    <option value="5">Dr. Lisa Williams - Family Therapist</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="appointmentDate">Date</label>
                <input type="date" id="appointmentDate" class="form-control">
            </div>
            
            <div class="form-group">
                <label for="appointmentTime">Time</label>
                <select id="appointmentTime" class="form-control">
                    <option value="">-- Select available time --</option>
                    <option value="09:00">9:00 AM</option>
                    <option value="10:30">10:30 AM</option>
                    <option value="14:00">2:00 PM</option>
                    <option value="15:30">3:30 PM</option>
                    <option value="17:00">5:00 PM</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="sessionType">Session Type</label>
                <select id="sessionType" class="form-control">
                    <option value="video">Video Call</option>
                    <option value="phone">Phone Call</option>
                    <option value="in-person">In-Person</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="sessionNotes">Notes (Optional)</label>
                <textarea id="sessionNotes" class="form-control" rows="3" placeholder="Any specific concerns or notes for the therapist..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" id="cancelNewAppointment">Cancel</button>
            <button class="btn btn-primary" id="confirmNewAppointment">Book Appointment</button>
        </div>
    </div>
</div>

<!-- Reschedule Modal -->
<div class="modal" id="rescheduleModal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div class="modal-header">
            <h2><i class="fas fa-edit"></i> Reschedule Appointment</h2>
            <div class="current-appointment-info">
                <p>Current: <span id="currentAppointmentTime">Jun 18, 10:30 AM</span> with <span id="currentTherapistName">Dr. Carlos Rodriguez</span></p>
            </div>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="rescheduleDate">New Date</label>
                <input type="date" id="rescheduleDate" class="form-control">
            </div>
            
            <div class="form-group">
                <label for="rescheduleTime">New Time</label>
                <select id="rescheduleTime" class="form-control">
                    <option value="">-- Select available time --</option>
                    <option value="09:00">9:00 AM</option>
                    <option value="11:00">11:00 AM</option>
                    <option value="14:00">2:00 PM</option>
                    <option value="16:00">4:00 PM</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="rescheduleReason">Reason for Rescheduling (Optional)</label>
                <textarea id="rescheduleReason" class="form-control" rows="3" placeholder="Let us know why you're rescheduling..."></textarea>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" id="cancelReschedule">Cancel</button>
            <button class="btn btn-primary" id="confirmReschedule">Confirm Reschedule</button>
        </div>
    </div>
</div>

<!-- Cancel Appointment Modal -->
<div class="modal" id="cancelModal">
    <div class="modal-content">
        <span class="close-modal">&times;</span>
        <div class="modal-header">
            <h2><i class="fas fa-times"></i> Cancel Appointment</h2>
            <div class="current-appointment-info">
                <p>Scheduled: <span id="cancelAppointmentTime">Jun 18, 10:30 AM</span> with <span id="cancelTherapistName">Dr. Carlos Rodriguez</span></p>
            </div>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="cancelReason">Reason for Cancellation</label>
                <select id="cancelReason" class="form-control">
                    <option value="">-- Select a reason --</option>
                    <option value="schedule">Scheduling Conflict</option>
                    <option value="not-needed">No Longer Needed</option>
                    <option value="therapist">Want Different Therapist</option>
                    <option value="other">Other Reason</option>
                </select>
            </div>
            
            <div class="form-group">
                <label for="cancelDetails">Additional Details (Optional)</label>
                <textarea id="cancelDetails" class="form-control" rows="3" placeholder="Provide any additional details..."></textarea>
            </div>
            
            <div class="cancellation-policy">
                <h4>Cancellation Policy</h4>
                <p>Appointments cancelled with less than 24 hours notice may be subject to a cancellation fee.</p>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-outline" id="cancelCancel">Go Back</button>
            <button class="btn btn-danger" id="confirmCancel">Confirm Cancellation</button>
        </div>
    </div>
</div>

<!-- Confirmation Modal -->
<div class="modal" id="confirmationModal">
    <div class="modal-content confirmation-content">
        <div class="modal-header">
            <div class="confirmation-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <h2 id="confirmationTitle">Appointment Booked!</h2>
        </div>
        <div class="modal-body">
            <p id="confirmationMessage">Your appointment with Dr. Mei Chen has been confirmed for June 15 at 2:00 PM.</p>
            <div class="confirmation-details" id="confirmationDetails">
                <!-- Details will be inserted here by JavaScript -->
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-primary" id="closeConfirmation">Close</button>
        </div>
    </div>
</div>


    <script src="js/userdashboard.js"></script>   <!-- this script is for the chat add another js for prototyping -->

    <script>
         // Simple script for calendar navigation (for prototype only)
         document.querySelectorAll('.nav-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                // In a real implementation, this would update the calendar
                alert('Calendar navigation would update the displayed month in a real implementation');
            });
        });

        // Today button functionality
        document.querySelector('.btn-outline').addEventListener('click', () => {
            // Scroll to today's date
            const currentDay = document.querySelector('.current-day');
            currentDay.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            
            // Highlight current day temporarily
            currentDay.style.backgroundColor = 'var(--accent)';
            setTimeout(() => {
                currentDay.style.backgroundColor = 'var(--primary)';
            }, 1000);
        });

        document.addEventListener('DOMContentLoaded', function() {
    // Modal elements
    const newAppointmentModal = document.getElementById('newAppointmentModal');
    const rescheduleModal = document.getElementById('rescheduleModal');
    const cancelModal = document.getElementById('cancelModal');
    const confirmationModal = document.getElementById('confirmationModal');
    
    // Buttons to open modals
    const newAppointmentBtn = document.querySelector('.page-header .btn-primary');
    const rescheduleBtns = document.querySelectorAll('.appointment-actions .btn-outline');
    const cancelBtns = document.querySelectorAll('.appointment-actions .btn-danger');
    
    // Buttons inside modals
    const cancelNewAppointment = document.getElementById('cancelNewAppointment');
    const confirmNewAppointment = document.getElementById('confirmNewAppointment');
    const cancelReschedule = document.getElementById('cancelReschedule');
    const confirmReschedule = document.getElementById('confirmReschedule');
    const cancelCancel = document.getElementById('cancelCancel');
    const confirmCancel = document.getElementById('confirmCancel');
    const closeConfirmation = document.getElementById('closeConfirmation');
    
    // Close buttons
    const closeModalButtons = document.querySelectorAll('.close-modal');
    
    // Open New Appointment Modal
    newAppointmentBtn.addEventListener('click', function() {
        newAppointmentModal.style.display = 'block';
    });
    
    // Open Reschedule Modal
    rescheduleBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const appointmentItem = this.closest('.appointment-item');
            const time = appointmentItem.querySelector('.appointment-time span').textContent;
            const therapist = appointmentItem.querySelector('.therapist-name').textContent;
            
            document.getElementById('currentAppointmentTime').textContent = time.split(',')[1].trim();
            document.getElementById('currentTherapistName').textContent = therapist;
            
            rescheduleModal.style.display = 'block';
        });
    });
    
    // Open Cancel Modal
    cancelBtns.forEach(btn => {
        btn.addEventListener('click', function() {
            const appointmentItem = this.closest('.appointment-item');
            const time = appointmentItem.querySelector('.appointment-time span').textContent;
            const therapist = appointmentItem.querySelector('.therapist-name').textContent;
            
            document.getElementById('cancelAppointmentTime').textContent = time;
            document.getElementById('cancelTherapistName').textContent = therapist;
            
            cancelModal.style.display = 'block';
        });
    });
    
    // Close modals when clicking on X
    closeModalButtons.forEach(button => {
        button.addEventListener('click', function() {
            this.closest('.modal').style.display = 'none';
        });
    });
    
    // Close modals when clicking outside
    window.addEventListener('click', function(event) {
        if (event.target.classList.contains('modal')) {
            event.target.style.display = 'none';
        }
    });
    
    // New Appointment Modal Buttons
    cancelNewAppointment.addEventListener('click', function() {
        newAppointmentModal.style.display = 'none';
    });
    
    confirmNewAppointment.addEventListener('click', function() {
        const therapist = document.getElementById('therapistSelect').value;
        const date = document.getElementById('appointmentDate').value;
        const time = document.getElementById('appointmentTime').value;
        const type = document.getElementById('sessionType').value;
        
        if (!therapist || !date || !time) {
            alert('Please fill in all required fields');
            return;
        }
        
        // Format the date for display
        const formattedDate = new Date(date).toLocaleDateString('en-US', {
            month: 'short',
            day: 'numeric',
            year: 'numeric'
        });
        
        // Format the time for display
        const timeParts = time.split(':');
        let hours = parseInt(timeParts[0]);
        const minutes = timeParts[1];
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12; // the hour '0' should be '12'
        const formattedTime = hours + ':' + minutes + ' ' + ampm;
        
        // Get therapist name
        const therapistSelect = document.getElementById('therapistSelect');
        const therapistName = therapistSelect.options[therapistSelect.selectedIndex].text.split(' - ')[0];
        
        // Set confirmation message
        document.getElementById('confirmationTitle').textContent = 'Appointment Booked!';
        document.getElementById('confirmationMessage').textContent = 
            `Your appointment with ${therapistName} has been confirmed for ${formattedDate} at ${formattedTime}.`;
        
        // Set confirmation details
        const details = document.getElementById('confirmationDetails');
        details.innerHTML = `
            <p><strong>Therapist:</strong> ${therapistName}</p>
            <p><strong>Date:</strong> ${formattedDate}</p>
            <p><strong>Time:</strong> ${formattedTime}</p>
            <p><strong>Session Type:</strong> ${type === 'video' ? 'Video Call' : type === 'phone' ? 'Phone Call' : 'In-Person'}</p>
        `;
        
        // Close new appointment modal and show confirmation
        newAppointmentModal.style.display = 'none';
        confirmationModal.style.display = 'block';
        
        // Reset form
        document.getElementById('therapistSelect').value = '';
        document.getElementById('appointmentDate').value = '';
        document.getElementById('appointmentTime').value = '';
        document.getElementById('sessionType').value = 'video';
        document.getElementById('sessionNotes').value = '';
    });
    
    // Reschedule Modal Buttons
    cancelReschedule.addEventListener('click', function() {
        rescheduleModal.style.display = 'none';
    });
    
    confirmReschedule.addEventListener('click', function() {
        const date = document.getElementById('rescheduleDate').value;
        const time = document.getElementById('rescheduleTime').value;
        
        if (!date || !time) {
            alert('Please select both date and time');
            return;
        }
        
        // Format the date for display
        const formattedDate = new Date(date).toLocaleDateString('en-US', {
            month: 'short',
            day: 'numeric',
            year: 'numeric'
        });
        
        // Format the time for display
        const timeParts = time.split(':');
        let hours = parseInt(timeParts[0]);
        const minutes = timeParts[1];
        const ampm = hours >= 12 ? 'PM' : 'AM';
        hours = hours % 12;
        hours = hours ? hours : 12;
        const formattedTime = hours + ':' + minutes + ' ' + ampm;
        
        const therapistName = document.getElementById('currentTherapistName').textContent;
        
        // Set confirmation message
        document.getElementById('confirmationTitle').textContent = 'Appointment Rescheduled!';
        document.getElementById('confirmationMessage').textContent = 
            `Your appointment with ${therapistName} has been rescheduled to ${formattedDate} at ${formattedTime}.`;
        
        // Set confirmation details
        const details = document.getElementById('confirmationDetails');
        details.innerHTML = `
            <p><strong>Therapist:</strong> ${therapistName}</p>
            <p><strong>New Date:</strong> ${formattedDate}</p>
            <p><strong>New Time:</strong> ${formattedTime}</p>
            ${document.getElementById('rescheduleReason').value ? 
                `<p><strong>Reason:</strong> ${document.getElementById('rescheduleReason').value}</p>` : ''}
        `;
        
        // Close reschedule modal and show confirmation
        rescheduleModal.style.display = 'none';
        confirmationModal.style.display = 'block';
        
        // Reset form
        document.getElementById('rescheduleDate').value = '';
        document.getElementById('rescheduleTime').value = '';
        document.getElementById('rescheduleReason').value = '';
    });
    
    // Cancel Modal Buttons
    cancelCancel.addEventListener('click', function() {
        cancelModal.style.display = 'none';
    });
    
    confirmCancel.addEventListener('click', function() {
        const reason = document.getElementById('cancelReason').value;
        
        if (!reason) {
            alert('Please select a cancellation reason');
            return;
        }
        
        const appointmentTime = document.getElementById('cancelAppointmentTime').textContent;
        const therapistName = document.getElementById('cancelTherapistName').textContent;
        
        // Set confirmation message
        document.getElementById('confirmationTitle').textContent = 'Appointment Cancelled';
        document.getElementById('confirmationMessage').textContent = 
            `Your appointment with ${therapistName} on ${appointmentTime} has been cancelled.`;
        
        // Set confirmation details
        const details = document.getElementById('confirmationDetails');
        details.innerHTML = `
            <p><strong>Therapist:</strong> ${therapistName}</p>
            <p><strong>Original Time:</strong> ${appointmentTime}</p>
            <p><strong>Reason:</strong> ${document.getElementById('cancelReason').options[document.getElementById('cancelReason').selectedIndex].text}</p>
            ${document.getElementById('cancelDetails').value ? 
                `<p><strong>Details:</strong> ${document.getElementById('cancelDetails').value}</p>` : ''}
            <p class="text-warning"><i class="fas fa-exclamation-circle"></i> Remember our cancellation policy</p>
        `;
        
        // Close cancel modal and show confirmation
        cancelModal.style.display = 'none';
        confirmationModal.style.display = 'block';
        
        // Reset form
        document.getElementById('cancelReason').value = '';
        document.getElementById('cancelDetails').value = '';
    });
    
    // Close Confirmation Modal
    closeConfirmation.addEventListener('click', function() {
        confirmationModal.style.display = 'none';
        // In a real app, you might want to refresh the appointment list here
    });
    
    // Set minimum date for date inputs to today
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('appointmentDate').min = today;
    document.getElementById('rescheduleDate').min = today;
});
    </script>
    <script src="js/activeLink.js"></script>
</body>
</html>